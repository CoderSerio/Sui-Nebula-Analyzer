# 基于 NebulaGraph 的 Sui 交易关联分析

基于 NebulaGraph 的智能地址关联识别平台，通过交易模式分析发现 Sui 区块链上的潜在关联地址。

> **注意**: 这是一个技术演示项目，实际部署时请确保遵守相关法律法规和隐私保护要求。

## 🚀 项目特色

- **多技术栈整合**: Next.js + NebulaGraph + Sui GraphQL API + D3.js
- **智能关联分析**: 基于交易频次、金额、时间模式的多维度分析
- **高性能图数据库**: 利用 NebulaGraph 处理复杂图查询
- **模块化架构**: 易于扩展和维护的代码结构

## 📊 核心功能

### 1. 数据采集模块
- 从 Sui API 获取交易数据
- 支持指定区块范围的批量采集
- 实时显示采集进度和统计信息
- 错误处理和重试机制

### 2. 图数据库建模
- 钱包地址作为图节点
- 交易关系作为图边
- 关联关系的多维度属性存储
- 高效的图查询索引

### 3. 关联性分析算法
- **交易频次分析**: 统计共同交易次数
- **金额模式识别**: 分析交易金额特征
- **时间序列分析**: 考虑交易时间分布
- **综合评分机制**: 多因子关联度计算

### 4. 可视化展示
- 交互式网络图谱
- 节点大小反映交易活跃度
- 边粗细表示关联强度
- 颜色编码区分地址类型

## 🔧 安装和部署

### 环境要求
- Node.js 18+
- NebulaGraph 3.0+
- 8GB+ RAM (推荐)

### 快速开始

以下指南旨在用最短的时间跑通整套系统

### 1. 准备依赖  
- Node.js 18 及以上版本  
- Docker & Docker Compose（用于一键启动 NebulaGraph）

```bash
cd sui-nebula-analyzer
pnpm install     # 或 npm install / yarn
```

### 2. 收集数据

可以通过运行 `scripts/get-sui-tx-data.js` 获取到 sui 数据：

> 当然，scripts 目录下已经提前准备好了数据了，可以直接使用

```bash
# 100 代表最新的 100 个检查点
node scripts/get-sui-tx-data.js 100
```


### 3. 启动 NebulaGraph  

最快的方式是使用官方 Docker 镜像：  

```bash
docker run -d --name nebula-graph \
  -p 9669:9669 -p 19669:19669 -p 19670:19670 \
  vesoft/nebula-graph:latest
```

等待服务完全就绪后，执行数据库初始化脚本（也可以通过安装 studio 可视化操作）：  

```bash
nebula-console -addr localhost -port 9669 -u root -p nebula -f scripts/nebula-schema.sql
```

### 4. 启动开发服务器

```bash
pnpm dev          # 默认监听 http://localhost:3000
```

### 6. 在浏览器体验  
1. 访问 `http://localhost:3000`  
2. 查看 csv 文件，输入其中一个采集到的地址，即可查看分析结果




## 🧮 关联算法详解

### 关联度计算公式

> 这里的关联度计算用于演示，不构成有效参考

\`\`\`
关联度 = 0.4 × 交易频次权重 + 0.3 × 金额权重 + 0.3 × 时间权重
\`\`\`

### 分类标准
- **强关联** (≥0.7): 高频交易，大额转账，长期互动
- **中等关联** (0.4-0.7): 中等频次，规律性交易
- **弱关联** (0.3-0.4): 偶发交易，小额转账

### 识别规则
- 共同交易次数 ≥ 3 次
- 交易时间跨度 > 24 小时
- 排除明显的合约交互



### 实际应用价值
- 反洗钱合规
- 风险控制
- 链上分析
- 安全审计

### 可扩展性
- 支持其他区块链
- 算法优化空间
- 功能模块化
- 部署灵活性


## 🤝 贡献指南

欢迎提交 Issue 和 Pull Request！

## 📄 许可证

MIT License

